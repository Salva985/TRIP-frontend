{
  "info": {
    "name": "TripAPI (Local)",
    "_postman_id": "3974a4c4-c4ce-4db7-86ef-4fbaf03139c0",
    "description": "Postman collection for TripAPI (health, destinations, trips, activities). Uses {{baseUrl}} environment variable.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "GET /api/health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "health"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Returns basic health JSON', function () {",
                  "  const json = pm.response.json();",
                  "  pm.expect(json).to.have.property('status');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Destinations",
      "item": [
        {
          "name": "GET /api/destinations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/destinations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "destinations"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('200 and array', function () {",
                  "  pm.response.to.have.status(200);",
                  "  const json = pm.response.json();",
                  "  pm.expect(Array.isArray(json)).to.eql(true);",
                  "  if (json[0] && json[0].id) { pm.environment.set('destinationId', json[0].id); }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "POST /api/destinations",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"city\": \"Sampleville\",\n  \"country\": \"Sampleland\",\n  \"timezone\": \"Europe/Madrid\",\n  \"currencyCode\": \"EUR\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/destinations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "destinations"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('201/200 and stores destinationId', function () {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200,201]);",
                  "  const json = pm.response.json();",
                  "  pm.environment.set('destinationId', json.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Trips",
      "item": [
        {
          "name": "GET /api/trips?search=&page=&pageSize=",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/trips?search=&page=1&pageSize=5",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "trips"
              ],
              "query": [
                {
                  "key": "search",
                  "value": ""
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "5"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('200 and PageResponse envelope', function () {",
                  "  pm.response.to.have.status(200);",
                  "  const json = pm.response.json();",
                  "  pm.expect(json).to.have.property('data');",
                  "  pm.expect(json).to.have.property('meta');",
                  "  if (json.data && json.data[0] && json.data[0].id) pm.environment.set('tripId', json.data[0].id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "POST /api/trips",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Postman Created Trip\",\n  \"startDate\": \"2025-12-10\",\n  \"endDate\": \"2025-12-15\",\n  \"destinationId\": \"{{destinationId}}\",\n  \"tripType\": \"LEISURE\",\n  \"notes\": \"Created from Postman\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/trips",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "trips"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('201/200 and store tripId', function () {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200,201]);",
                  "  const json = pm.response.json();",
                  "  pm.environment.set('tripId', json.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "GET /api/trips/:id",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/trips/{{tripId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "trips",
                "{{tripId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('200 trip detail', function () { pm.response.to.have.status(200); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "PUT /api/trips/:id",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Postman Updated Trip\",\n  \"startDate\": \"2025-12-11\",\n  \"endDate\": \"2025-12-16\",\n  \"destinationId\": \"{{destinationId}}\",\n  \"tripType\": \"BUSINESS\",\n  \"notes\": \"Updated from Postman\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/trips/{{tripId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "trips",
                "{{tripId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('200 updated trip', function () { pm.response.to.have.status(200); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "DELETE /api/trips/:id",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/trips/{{tripId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "trips",
                "{{tripId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('204 deleted', function () { pm.expect(pm.response.code).to.be.oneOf([200,204]); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Activities",
      "item": [
        {
          "name": "GET /api/activities?search=&page=&pageSize=",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/activities?search=&page=1&pageSize=5",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "activities"
              ],
              "query": [
                {
                  "key": "search",
                  "value": ""
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "pageSize",
                  "value": "5"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('200 and PageResponse envelope', function () {",
                  "  pm.response.to.have.status(200);",
                  "  const json = pm.response.json();",
                  "  pm.expect(json).to.have.property('data');",
                  "  pm.expect(json).to.have.property('meta');",
                  "  if (json.data && json.data[0] && json.data[0].id) pm.environment.set('activityId', json.data[0].id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "POST /api/activities",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tripId\": \"{{tripId}}\",\n  \"date\": \"2025-12-12\",\n  \"title\": \"Postman Activity\",\n  \"notes\": \"Created from Postman\",\n  \"type\": \"OTHER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/activities",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "activities"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('201/200 store activityId', function () {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200,201]);",
                  "  const json = pm.response.json();",
                  "  pm.environment.set('activityId', json.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "GET /api/activities/:id",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/activities/{{activityId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "activities",
                "{{activityId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('200 activity detail', function () { pm.response.to.have.status(200); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "PUT /api/activities/:id",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tripId\": \"{{tripId}}\",\n  \"date\": \"2025-12-13\",\n  \"title\": \"Postman Activity (Updated)\",\n  \"notes\": \"Updated from Postman\",\n  \"type\": \"OTHER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/activities/{{activityId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "activities",
                "{{activityId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('200 updated activity', function () { pm.response.to.have.status(200); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "DELETE /api/activities/:id",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/activities/{{activityId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "activities",
                "{{activityId}}"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('204 deleted', function () { pm.expect(pm.response.code).to.be.oneOf([200,204]); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    }
  ]
}